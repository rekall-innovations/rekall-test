#!/bin/bash
if [ "$1" == "ok" ]; then
   cp /Users/adamsh/Projects/test/osx10.9.5/output/TestDawrinPSTree /Users/adamsh/Projects/test/osx10.9.5/TestDawrinPSTree
elif [ "$1" == "meld" ]; then
   meld /Users/adamsh/Projects/test/osx10.9.5/output/TestDawrinPSTree /Users/adamsh/Projects/test/osx10.9.5/TestDawrinPSTree
elif [ "$1" == "diff" ]; then
   diff /Users/adamsh/Projects/test/osx10.9.5/output/TestDawrinPSTree /Users/adamsh/Projects/test/osx10.9.5/TestDawrinPSTree
elif [ "$1" == "run" ]; then
   rekall  --cache_dir '/Users/adamsh/Projects/test/osx10.9.5/../profile_cache/' --format 'test' --filename '/Users/adamsh/Projects/test/osx10.9.5/vmem.e01' --name_resolution_strategies 'Module' 'Symbol' - pstree
else
   less /Users/adamsh/Projects/test/osx10.9.5/output/TestDawrinPSTree
fi
exit 0
{
    "errors": {}, 
    "logging": "", 
    "time_used": 7.845139980316162, 
    "return_code": 0, 
    "failures": {
        "testCase (__main__.TestDawrinPSTree)": "Traceback (most recent call last):\n  File \"/Users/adamsh/Projects/rekall/rekall/testlib.py\", line 235, in run\n    testMethod()\n  File \"/Users/adamsh/Projects/rekall/rekall/testlib.py\", line 285, in testCase\n    self.assertEqual(previous, current)\nAssertionError: 108 != 115\n"
    }, 
    "output": [
        " Pid  || Ppid || Uid  ||-||             Name             ", 
        "------||------||------|| ||------------------------------", 
        "     0||     0||     0|| ||kernel_task                   ", 
        "     1||     0||     0||.||launchd                       ", 
        "   229||     1||   501||..||IMRemoteURLConne              ", 
        "    26||     1||     0||..||authd                         ", 
        "    25||     1||     0||..||xpcd                          ", 
        "   104||     1||    24||..||networkd                      ", 
        "    23||     1||     0||..||cfprefsd                      ", 
        "    22||     1||     0||..||powerd                        ", 
        "    21||     1||     0||..||opendirectoryd                ", 
        "    20||     1||     0||..||distnoted                     ", 
        "    18||     1||     0||..||securityd                     ", 
        "    17||     1||     0||..||syslogd                       ", 
        "    16||     1||     0||..||configd                       ", 
        "    15||     1||     0||..||diskarbitrationd              ", 
        "    14||     1||     0||..||notifyd                       ", 
        "    13||     1||     0||..||taskgated                     ", 
        "    12||     1||     0||..||kextd                         ", 
        "156224||     0||     0||..||                              ", 
        "   720||      ||      ||  ||                              ", 
        "     0||     0||156146||...||                              ", 
        "      ||      ||   640||   ||                              ", 
        "   172||     1||   202||..||com.apple.audio.              ", 
        "   227||     1||   501||..||com.apple.dock.e              ", 
        "   159||     1||   202||..||coreaudiod                    ", 
        "   132||     1||     0||..||tccd                          ", 
        "   133||     1||     0||..||suhelperd                     ", 
        "   130||     1||   200||..||xpcd                          ", 
        "   217||     1||     0||..||FindMyMacd                    ", 
        "    44||     1||     0||..||mds                           ", 
        "    81||     1||    88||..||WindowServer                  ", 
        "   166||     1||   501||..||xpcd                          ", 
        "    82||     1||     0||..||ocspd                         ", 
        "    83||     1||     0||..||backupd                       ", 
        "    39||     1||     0||..||revisiond                     ", 
        "    80||     1||     0||..||rpcsvchost                    ", 
        "    37||     1||     0||..||SleepServicesD                ", 
        "   134||     1||   210||..||timezoned                     ", 
        "    34||     1||     0||..||stackshot                     ", 
        "   107||     1||     0||..||networkd_privile              ", 
        "    31||     1||   213||..||usbmuxd                       ", 
        "    30||     1||     0||..||warmd                         ", 
        "    29||     1||     0||..||wdhelper                      ", 
        "    27||     1||     0||..||coreservicesd                 ", 
        "    61||     1||    55||..||appleeventsd                  ", 
        "    60||     1||     0||..||launchservicesd               ", 
        "   190||     1||   501||..||com.apple.ShareK              ", 
        "    56||     1||     0||..||dynamic_pager                 ", 
        "    55||     1||     0||..||firmwaresyncd                 ", 
        "    54||     1||     0||..||fseventsd                     ", 
        "    53||     1||     0||..||hidd                          ", 
        "   109||     1||     0||..||sysmond                       ", 
        "    51||     1||     0||..||KernelEventAgent              ", 
        "    50||     1||   205||..||locationd                     ", 
        "    49||     1||     0||..||logind                        ", 
        "    48||     1||   501||..||loginwindow                   ", 
        "   125||     1||   222||..||netbiosd                      ", 
        "    45||     1||    65||..||mDNSResponder                 ", 
        "   164||     1||   202||..||xpcd                          ", 
        "   142||     1||     0||..||securityd_servic              ", 
        "   114||     1||     0||..||com.apple.CodeSi              ", 
        "   141||     1||   501||..||launchd                       ", 
        "   239||   141||   501||...||cookied                       ", 
        "   151||   141||   501||...||Terminal                      ", 
        "   230||   151||     0||....||login                         ", 
        "   232||   230||   501||.....||bash                          ", 
        "   236||   141||   501||...||CloudKeychainPro              ", 
        "   169||   141||   501||...||fontd                         ", 
        "   238||   141||   501||...||syncdefaultsd                 ", 
        "   175||   141||   501||...||sharingd                      ", 
        "   157||   141||   501||...||Finder                        ", 
        "   156||   141||   501||...||SystemUIServer                ", 
        "   153||   141||   501||...||Dock                          ", 
        "   171||   141||   501||...||CVMCompiler                   ", 
        "   148||   141||   501||...||cfprefsd                      ", 
        "   219||   141||   501||...||accountsd                     ", 
        "   212||   141||   501||...||AppleIDAuthAgent              ", 
        "   210||   141||   501||...||helpd                         ", 
        "   209||   141||   501||...||identityservices              ", 
        "   155||   141||   501||...||tccd                          ", 
        "   182||   141||   501||...||CVMCompiler                   ", 
        "   163||   141||   501||...||pboard                        ", 
        "   183||   141||   501||...||ubd                           ", 
        "   146||   141||   501||...||distnoted                     ", 
        "   192||   141||   501||...||imagent                       ", 
        "206670||   501||   501||...||                              ", 
        "   464||      ||      ||   ||                              ", 
        "     0||     0||     0||....||                              ", 
        "   207||   141||   501||...||lsboxd                        ", 
        "   223||   141||   501||...||secd                          ", 
        "   204||   141||   501||...||SocialPushAgent               ", 
        "   203||   141||   501||...||WiFiKeychainProx              ", 
        "   228||   141||   501||...||quicklookd                    ", 
        "   194||   141||   501||...||CalendarAgent                 ", 
        "   181||   141||   501||...||NotificationCent              ", 
        "   180||   141||   501||...||usernoted                     ", 
        "   179||   141||   501||...||librariand                    ", 
        "   111||     1||     0||..||ntpd                          ", 
        "   100||     1||     0||..||mds_stores                    ", 
        "    69||     1||     0||..||airportd                      ", 
        "    68||     1||     0||..||aosnotifyd                    ", 
        "    67||     1||     0||..||apsd                          ", 
        "    66||     1||     0||..||autofsd                       ", 
        "   129||     1||   200||..||softwareupdated               ", 
        "   135||     1||     0||..||CVMServer                     ", 
        "   136||     1||    92||..||launchd                       ", 
        "   138||   136||    92||...||CVMCompiler                   ", 
        "   110||     1||     0||..||usbd                          ", 
        "   201||     1||   501||..||IMDPersistenceAg              ", 
        "   197||     1||    55||..||xpcd                          ", 
        "   224||     1||   501||..||com.apple.IconSe              ", 
        "   193||     1||   202||..||com.apple.audio.              ", 
        "   188||     1||     0||..||filecoordination              ", 
        "   184||     1||     0||..||mdworker                      "
    ], 
    "options": {
        "--name_resolution_strategies": [
            "Module", 
            "Symbol"
        ], 
        "executable": "rekall ", 
        "--filename": "/Users/adamsh/Projects/test/osx10.9.5/vmem.e01", 
        "--format": "test", 
        "commandline": "pstree", 
        "pid": 232, 
        "test_class": "TestDawrinPSTree", 
        "--cache_dir": "/Users/adamsh/Projects/test/osx10.9.5/../profile_cache/", 
        "tempdir": "/var/folders/00/1pjr0000h01000cxqpysvccm006t70/T/tmpMJOylS/TestDawrinPSTreeThread-8", 
        "executed_command": "rekall  --cache_dir '/Users/adamsh/Projects/test/osx10.9.5/../profile_cache/' --format 'test' --filename '/Users/adamsh/Projects/test/osx10.9.5/vmem.e01' --name_resolution_strategies 'Module' 'Symbol' - pstree", 
        "testdir": "/Users/adamsh/Projects/test/osx10.9.5"
    }
}